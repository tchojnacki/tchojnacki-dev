---
import { getPosts, type Post } from "~/content"

import PostEntry from "./PostEntry.astro"

interface Props {
  heading: number
  length?: number
  filter?: (post: Post) => boolean
}

const posts = await getPosts()
const { heading, length = Infinity, filter } = Astro.props
---

{
  posts
    .filter(p => !filter || filter(p))
    .slice(0, length)
    .map(post => <PostEntry {heading} {post} />)
}
