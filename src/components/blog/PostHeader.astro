---
import { sortBy } from 'lodash-es'
import Bullet from '~/components/blog/Bullet.astro'
import Link from '~/components/common/Link'
import type { Post } from '~/content'

interface Props {
  post: Post
  readingTime: number
}

const { post, readingTime } = Astro.props

const tags = sortBy(
  [
    ...post.data.skills.map(s => ({ tag: s.id, href: `/skills/${s.id}` })),
    ...post.data.tags.map(t => ({ tag: t, href: `/tags/${t}` })),
  ],
  'tag',
)
---

<header class="centered-header flex flex-col gap-3 text-center sm:text-left">
  <h1 class="text-neutral-1000 dark:text-neutral-0 text-3xl sm:text-4xl">{post.data.title}</h1>
  <div class="text-neutral-800 dark:text-neutral-200">
    by&nbsp;<address class="text-neutral-1000 dark:text-neutral-0 inline font-bold not-italic">
      {post.data.author}
    </address>
    <Bullet />on&nbsp;<time
      datetime={post.data.date.toISOString().split('T')[0]}
      class="text-neutral-1000 dark:text-neutral-0 font-bold"
      >{
        post.data.date.toLocaleDateString('en-US', {
          weekday: undefined,
          day: 'numeric',
          month: 'short',
          year: 'numeric',
        })
      }</time
    ><Bullet /><span class="text-neutral-1000 dark:text-neutral-0 font-bold"
      >{readingTime}&nbsp;min</span
    >&nbsp;read
  </div>
  <ul class="flex flex-wrap justify-center gap-4 sm:justify-start">
    {
      tags.map(({ tag, href }) => (
        <li>
          <Link {href}>#{tag}</Link>
        </li>
      ))
    }
  </ul>
</header>
